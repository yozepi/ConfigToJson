name: $(Date:yyyyMMdd)$(Rev:.rr)

trigger:
  branches:
    exclude:
    - "*"

pr:
 branches:
  include:
    - main

pool:
  vmImage: ubuntu-latest

resources:
  repositories:
  - repository: templates
    type: git
    name: utilities/pipeline-scripts

variables:
- name: projectName
  value: ConfigToJson
- name: baseFolder
  value: /src
stages:
- stage: UnitTestFramework
  displayName: ConfigToJson Unit Tests

  jobs:
  - job:
    displayName: Build and Test
    steps:
    - task: CmdLine@2
      inputs:
        script: 'ls $(Build.Repository.LocalPath)$(baseFolder)'

    - template: pipeline-templates/build-project.template.yaml@templates
      parameters:
        project: $(projectName)
        baseFolder: $(baseFolder)
        skipBuild: false
